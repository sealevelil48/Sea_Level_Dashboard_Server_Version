<!DOCTYPE html>
<html>
<head>
    <title>IMS Code Translation Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-case { margin: 10px 0; padding: 10px; border: 1px solid #ccc; }
        .before { color: #666; }
        .after { color: #0066cc; font-weight: bold; }
    </style>
</head>
<body>
    <h1>IMS Code Translation Test</h1>
    
    <h2>Wave Height Translations</h2>
    <div class="test-case">
        <div class="before">Before: 50 / 50-100</div>
        <div class="after" id="wave1"></div>
    </div>
    <div class="test-case">
        <div class="before">Before: 60</div>
        <div class="after" id="wave2"></div>
    </div>
    
    <h2>Wind Translations</h2>
    <div class="test-case">
        <div class="before">Before: 045-135/10-25</div>
        <div class="after" id="wind1"></div>
    </div>
    <div class="test-case">
        <div class="before">Before: 270/15-20</div>
        <div class="after" id="wind2"></div>
    </div>
    
    <h2>Risk Color Examples</h2>
    <div class="test-case">
        <div class="before">Wave Code 30 (Low Risk):</div>
        <div class="after" style="color: #6c757d;">■ Grey - No significant weather</div>
    </div>
    <div class="test-case">
        <div class="before">Wave Code 50 (Risk):</div>
        <div class="after" style="color: #ffc107;">■ Yellow - Risk</div>
    </div>
    <div class="test-case">
        <div class="before">Wave Code 70 (Significant Risk):</div>
        <div class="after" style="color: #fd7e14;">■ Orange - Significant Risk</div>
    </div>
    <div class="test-case">
        <div class="before">Wave Code 90 (Severe Risk):</div>
        <div class="after" style="color: #dc3545;">■ Red - Severe Risk</div>
    </div>

    <script>
        // IMS Translation Functions (copied from implementation)
        const seaStateCodes = {
            10: "Calm", 20: "Rippled", 30: "Smooth", 40: "Smooth to slight", 50: "Slight",
            55: "Slight to moderate", 60: "Moderate", 70: "Moderate to rough", 80: "Rough",
            90: "Rough to very rough", 110: "Very rough", 120: "Very rough to high",
            130: "High", 140: "High to very high", 150: "Very high", 160: "Phenomenal"
        };
        
        const windDirections = {
            "045": "NE", "090": "E", "135": "SE", "180": "S", "225": "SW", "270": "W", "315": "NW", "360": "N"
        };
        
        function parseWaveHeight(waveString) {
            if (!waveString || typeof waveString !== 'string') return waveString;
            
            const parts = waveString.split(' / ');
            if (parts.length !== 2) {
                const code = parseInt(waveString.trim());
                return seaStateCodes[code] || waveString;
            }
            
            const code = parseInt(parts[0].trim());
            const actualHeight = parts[1].trim();
            const translatedCode = seaStateCodes[code] || parts[0].trim();
            
            return `${translatedCode} (${actualHeight} cm)`;
        }
        
        function parseWindInfo(windString) {
            if (!windString || typeof windString !== 'string') return windString;
            
            const parts = windString.split('/');
            if (parts.length !== 2) return windString;
            
            const directions = parts[0];
            const speeds = parts[1];
            
            let translatedDirections = directions;
            if (directions.includes('-')) {
                const dirParts = directions.split('-');
                const dir1 = dirParts[0].padStart(3, '0');
                const dir2 = dirParts[1].padStart(3, '0');
                const trans1 = windDirections[dir1] || dirParts[0];
                const trans2 = windDirections[dir2] || dirParts[1];
                translatedDirections = `${trans1}-${trans2}`;
            } else {
                const dir = directions.padStart(3, '0');
                translatedDirections = windDirections[dir] || directions;
            }
            
            return `${translatedDirections} (${speeds.trim()} km/h)`;
        }
        
        // Test the translations
        document.getElementById('wave1').textContent = 'After: ' + parseWaveHeight('50 / 50-100');
        document.getElementById('wave2').textContent = 'After: ' + parseWaveHeight('60');
        document.getElementById('wind1').textContent = 'After: ' + parseWindInfo('045-135/10-25');
        document.getElementById('wind2').textContent = 'After: ' + parseWindInfo('270/15-20');
    </script>
</body>
</html>